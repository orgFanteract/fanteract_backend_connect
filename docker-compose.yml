version: "3.8"

services:
  connect-app:
    image: fanteract-connect-app:latest
    container_name: fanteract-connect-app

    environment:
      # Spring í”„ë¡œí•„
      SPRING_PROFILES_ACTIVE: prod

      # ì •ë³´ìš© (ì„ íƒ)
      SERVER_PORT: 8080
      SPRING_APPLICATION_NAME: fanteract-connect

      # âœ… RDS ì—°ê²° ì •ë³´ (connect ì „ìš© RDS + connect_db ìŠ¤í‚¤ë§ˆ)
      SPRING_DATASOURCE_URL: jdbc:mysql://fanteract-connect-db.c32w6yq24ria.ap-northeast-2.rds.amazonaws.com:3306/connect_db?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul&characterEncoding=UTF-8
      SPRING_DATASOURCE_USERNAME: admin         # ğŸ‘‰ ì‹¤ì œ RDS ê³„ì •ëª…ìœ¼ë¡œ ë³€ê²½
      SPRING_DATASOURCE_PASSWORD: password      # ğŸ‘‰ ì‹¤ì œ ë¹„ë°€ë²ˆí˜¸ë¡œ ë³€ê²½

      # âœ… JWT
      JWT_SECRET: jwtsecretas78dg97d89we4hahsd89we4hahsd89eqwhu4rtihweur489wtbakjwerbjka2q9it4

      # ğŸ”— connect â†’ account ì„œë¹„ìŠ¤ ë‚´ë¶€ í˜¸ì¶œ URL (EC2 Private IP)
      ACCOUNT_SERVICE_URL: http://172.31.39.103:8080   # ğŸ‘‰ account ì„œë²„ private IP:8080

    ports:
      - "8080:8080"

    restart: always